<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Available Services & Service Centers</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
   
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <h1 class="header">Available Services & Service Centers</h1>
 
        <!-- Carousel -->
        <div id="carouselExample" class="carousel slide mb-5" data-bs-ride="carousel">
            <div class="carousel-inner">
              <div class="carousel-item active">
                <img src="/assets/carimage.webp"
                     class="d-block w-100" alt="Service Worker Repairing Vehicle">
            </div>
                <div class="carousel-item">
                    <img src="/assets/truckimage.jpg" class="d-block w-100" alt="...">
                </div>
                <div class="carousel-item">
                    <img src="/assets/truck.jpg" class="d-block w-100" alt="...">
                </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
 
        <!-- Available Services Section -->
        <div class="section-container available-services">
            <h2>Available Services</h2>
            <div class="search-container">
                <label for="searchInput">Search Service Name:</label><br>
                <input type="text" id="searchInput" [(ngModel)]="searchData" placeholder="Enter service name"
                    class="form-control" />
                <button (click)="searchByService()" class="btn btn-primary mt-2">Search</button>
            </div>
            <table id="servicesTable" class="table table-bordered table-striped">
                <thead class="table-primary">
                    <tr>
                        <th>S. NO</th>
                        <th>Service Name</th>
                        <th>Price</th>
                        <th>Type of Vehicle</th>
                        <th>Appointment Date</th>
                        <th>Location</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let service of services; let i = index">
                        <td>{{i+1}}</td>
                        <td>{{ service.serviceName }}</td>
                        <td>{{ service.servicePrice }}</td>
                        <td>{{ service.typeOfVehicle }}</td>
                        <td>
                            <input type="date" [(ngModel)]="appointmentDates[i]" (ngModelChange)="validateDate($event, i)"
                                #dateInput="ngModel" [class.invalid]="dateInput.invalid && dateInput.touched" />
                            <div *ngIf="dateInput.invalid && dateInput.touched" class="error">
                                Please select a valid future date.
                            </div>
                        </td>
                        <td>
                            <input type="text" [(ngModel)]="locations[i]" placeholder="Enter location"
                                class="form-control" (input)="onInputChange(i)">
                        </td>
                        <td><button class="btn btn-success" (click)="addAppointment(service.serviceId,i)"
                                [disabled]="!appointmentDates[i] || !locations[i]">Add Appointment</button></td>
                    </tr>
                </tbody>
            </table>
            <div *ngIf="showPopup" class="popup">
                <p>{{ serviceId ? 'Service Updated Successfully' : 'Appointment Added Successfully' }}</p>
                <button class="btn btn-primary" (click)="closePopup()">Ok</button>
            </div>
        </div>
 
        <!-- Service Centers Map Section -->
        <div class="section-container map-container">
            <h2>Find Our Service Centers</h2>
            <div id="map-container">
                <iframe src="https://www.google.com/maps/d/embed?mid=1UC4xAYS_S815VGTPp748fauAsVvJAUs&ehbc=2E312F"
                    width="100%" height="450" style="border:0;" allowfullscreen="" loading="lazy"
                    referrerpolicy="no-referrer-when-downgrade"></iframe>
            </div>
        </div>
    </div>
 
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
</body>
</html>